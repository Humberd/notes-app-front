parameters:
  runTests: 'true'
  nodeVersion: ''

steps:
  - script: |
      node -p "new Date().getTime()" > buildStartTime.txt

  - task: NodeTool@0
    inputs:
      versionSpec: 12.12.0

  - task: Npm@1
    displayName: 'Install'
    inputs:
      command: custom
      customCommand: ci

  - task: Npm@1
    displayName: 'Build'
    inputs:
      command: custom
      customCommand: "run build:prod"

  - task: CopyFiles@2
    inputs:
      SourceFolder: '$(System.DefaultWorkingDirectory)'
      Contents: |
        dist/*
        buildStartTime.txt
        buildEndTime.txt
      TargetFolder: '$(Build.ArtifactStagingDirectory)'

  - task: PublishBuildArtifacts@1

  - script: |
      node -p "new Date().getTime()" > buildEndTime.txt
